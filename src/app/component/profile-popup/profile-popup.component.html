<div class="popup-overlay" [ngClass]="{'visible':isVisible}">
    <div class="popup text-center">
        <form class="form-card" #f="ngForm" (submit)="formManager(f)">
            <div class="row">
                <div class="col-12 justify-content-between">
                    <span class="logo-text text-center"><img src="../../../assets/img/hhh_logo_orange.png" alt="" class="mx-2">HahaHub</span>
                    <h4 class="fadeIn first text-intro text-center mt-3">Modifica Profilo</h4>
                </div>
                <div class="col-7 justify-content-between text-center mt-2 px-4">
                    <div class="form-group col-sm-12 flex-column d-flex">
                        <label class="form-control-label">
                            Nome<span class="text-danger"> *</span>
                        </label>
                        <input type="text" name="name" placeholder=""
                            [ngModel]="user?.name"
                            pattern="[a-zA-Z\s'àèìòù]{1,100}" #name="ngModel">

                            <small class="text-danger" 
                                [ngStyle]="{'display':name.invalid && name.dirty ? 'block' : 'none'}">
                                caratteri non ammessi
                            </small>
                    </div>
                    <div class="form-group col-sm-12 flex-column d-flex">
                        <label class="form-control-label">
                            Cognome<span class="text-danger"> *</span>
                        </label>
                        <input type="text" name="lastname" placeholder=""
                            [ngModel]="user?.lastname"
                            pattern="[a-zA-Z\s'àèìòù]{1,100}" #lastname="ngModel">
                            <small class="text-danger" 
                                [ngStyle]="{'display':lastname.invalid && lastname.dirty ? 'block' : 'none'}">
                                caratteri non ammessi
                            </small>
                    </div>
                    <div class="form-group col-sm-12 flex-column d-flex">
                        <label class="form-control-label">
                            Mail<span class="text-danger"> *</span>
                        </label>
                        <input [ngModel]="user?.mail" type="text" name="mail" placeholder="">
                    </div>
                    <div class="form-group col-sm-12 flex-column d-flex">
                        <label class="form-control-label">
                            Password<span class="text-danger"> *</span>
                        </label>
                        <input type="password" name="password" placeholder=""
                            [ngModel]="user?.password"
                            pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,10}"
                            #password="ngModel"
                            [ngStyle]="{'background-color': password.invalid && password.dirty ? '#fa8072' : 'white'}">
                    </div>
                    <div class="form-group col-sm-12 flex-column d-flex">
                        <label class="form-control-label">
                            Conferma password<span class="text-danger"> *</span>
                        </label>
                        <input type="password" name="confirm" placeholder=""
                            [ngModel]="user?.password"
                            pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,10}"
                            #confirm="ngModel"
                            [ngStyle]="{'background-color': password.invalid && password.dirty ? '#fa8072' : 'white'}">
                    </div>
                </div>
                <div class="col-5 text-center mt-2 d-flex flex-column justify-content-center text-center align-items-center px-4">
                    <img class="img-profilo" [src]="profileImage ? profileImage : '../../../assets/img/avatarHhh.png'" alt="">
                    <div class="col-12 text-center my-3">
                        <label>Carica Foto Profilo</label>
                        <input type="file" name="profileImage" class="form-control" style="display: none;"
                            accept="image/jpeg,image/png" maxlength="5242880"
                            (change)="uploadImage($event)" #image>
                        <h6 id="imageSizeError" style="display: none; color: red;"></h6>
                        <div class="row justify-content-center my-2">
                            <button type="button" class="btn-block btn-primary send col-6"
                                (click)="image.click()">{{user?.profileImage ? 'Modifica' : 'Carica'}}</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row col-12 mt-4 text-center m-3">
            <div class="form-group col-6"> 
                <button type="button" class="btn-block btn-primary send"
                    (click)="leaveUserUpdatePopup(f)">
                    Abbandona
                </button>
            </div>
            <div class="form-group col-6"> 
                <button type="submit" class="btn-block btn-primary send">Modifica</button> 
            </div>
        </div>
        </form>
        
    </div>
</div>